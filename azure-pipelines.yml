# Docs: https://aka.ms/yaml
name: $(TeamProject)_$(Build_SourceVersion)

trigger:
  - master

pool:
  vmImage: 'vs2017-win2016'

steps:
- powershell: .\build.ps1
  displayName: 'Run Build'

- task: PublishTestResults@2
  displayName: 'Publish Test Results'
  condition: always()
  inputs:
    testResultsFormat: NUnit
    searchFolder: '$(Common.TestResultsDirectory)'

- powershell: Write-Host '##vso[build.addbuildtag]$(GitVersion.SemVer)'
  displayName: 'Git tag'

- powershell: Write-Host '##vso[build.updatebuildnumber]$(GitVersion.SemVer)'
  displayName: 'Set the build number'
